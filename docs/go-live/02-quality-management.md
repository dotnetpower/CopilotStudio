# 2. 품질 관리

> **Go-Live 고려 사항** > 품질 관리

---

## 📋 목차

- [개요](#개요)
- [2.1 응답 품질](#21-응답-품질)
- [2.2 사용자 경험](#22-사용자-경험)
- [다음 단계](#다음-단계)

---

## 개요

품질 관리는 에이전트의 성공적인 운영을 위한 핵심 요소입니다. 정확한 응답, 일관성, 그리고 우수한 사용자 경험을 보장해야 합니다.

---

## 2.1 응답 품질

### 정확성 테스트

다양한 시나리오에서 응답의 정확성을 체계적으로 검증합니다.

**테스트 케이스 작성:**
```
카테고리: 문서 검색
질문: "2024년 연차 휴가 규정이 어떻게 되나요?"
기대 답변: SharePoint의 HR 정책 문서에서 정확한 연차 규정 인용
검증 항목:
  ✓ 올바른 문서 참조
  ✓ 최신 정보 제공 (2024년)
  ✓ 명확하고 이해하기 쉬운 설명
```

**테스트 매트릭스:**

| 시나리오 유형 | 테스트 케이스 수 | 통과 기준 |
|---|---|---|
| 기본 FAQ | 50+ | 95% 정확도 |
| 문서 검색 | 30+ | 90% 정확도 |
| 데이터 조회 | 20+ | 100% 정확도 |
| 복합 질문 | 15+ | 85% 정확도 |

### 일관성 확인

동일하거나 유사한 질문에 대해 일관된 답변을 제공하는지 확인합니다.

**검증 방법:**
1. 동일 질문을 여러 번 반복하여 응답 비교
2. 표현만 다른 유사 질문으로 테스트
3. 다른 시간대/세션에서 동일 질문 테스트

**예시:**
```
질문 1: "휴가 신청은 어떻게 하나요?"
질문 2: "연차를 쓰려면 어떤 절차를 거쳐야 하나요?"
질문 3: "휴가 내는 방법 알려주세요"

→ 세 질문 모두 동일한 절차 안내를 제공해야 함
```

### 오류 처리

예상치 못한 입력이나 오류 상황에 대한 적절한 처리 방안을 마련합니다.

**일반적인 오류 시나리오:**

**1. 모호한 질문**
```
사용자: "그거 어떻게 하는 거야?"
에이전트: "무엇에 대해 도움이 필요하신가요? 좀 더 구체적으로 말씀해 주시면 
          정확한 안내를 드릴 수 있습니다.
          예: 휴가 신청, 비용 처리, 문서 검색 등"
```

**2. 범위 외 질문**
```
사용자: "이번 달 급여가 왜 적게 나왔어요?"
에이전트: "급여 관련 문의는 HR 담당자가 직접 확인이 필요합니다.
          HR팀 (내선: 1234, hr@company.com)으로 문의해 주세요.
          빠른 처리를 위해 급여명세서를 준비해 주시면 좋습니다."
```

**3. 정보 없음**
```
사용자: "2026년 정책은?"
에이전트: "죄송합니다. 현재 2026년 정책은 아직 확정되지 않았습니다.
          최신 정보는 2025년 정책입니다. 확인하시겠습니까?"
```

**4. 시스템 오류**
```
에이전트: "일시적인 오류가 발생했습니다.
          잠시 후 다시 시도해 주시거나,
          긴급한 경우 헬프데스크 (1234)로 연락 주세요."
```

---

## 2.2 사용자 경험

### 자연스러운 대화

대화 흐름이 자연스럽고 이해하기 쉬운지 평가합니다.

**대화 설계 원칙:**

**1. 명확하고 간결한 표현**
- ❌ 나쁜 예: "귀하께서 요청하신 사항과 관련하여 당사의 규정집 3.2조 항목을 참조하시면..."
- ✅ 좋은 예: "휴가 신청은 3단계로 진행됩니다. 먼저 시스템에 로그인해 주세요."

**2. 단계별 안내**
```
1단계: 인사포털(portal.company.com)에 접속
2단계: '휴가 신청' 메뉴 선택
3단계: 날짜와 사유 입력 후 제출

각 단계에서 도움이 필요하시면 말씀해 주세요.
```

**3. 확인 및 피드백**
```
에이전트: "휴가 신청 방법을 안내해 드렸습니다. 도움이 되셨나요?"
[도움됨] [추가 질문] [담당자 연결]
```

**4. 맥락 유지**
```
사용자: "휴가 신청하려고"
에이전트: "네, 휴가 신청을 도와드리겠습니다. 어떤 종류의 휴가인가요?"
사용자: "연차요"
에이전트: "연차 휴가 신청이시군요. (이전 맥락 유지) ..."
```

### 응답 시간

사용자가 수용 가능한 응답 시간 내 답변을 제공합니다.

**응답 시간 목표:**

| 유형 | 목표 시간 | 설명 |
|------|-----------|------|
| 즉시 응답 | < 2초 | 간단한 FAQ |
| 일반 응답 | < 5초 | 문서 검색 |
| 복잡한 쿼리 | < 10초 | 데이터 조회 |
| 타임아웃 | 15초 | 이상 시 오류 처리 |

**성능 최적화 전략:**

**1. 캐싱 활용**
- 자주 조회되는 데이터는 캐싱 처리
- FAQ는 미리 준비된 답변 사용

**2. 청크 크기 조정**
```
참조 자료 설정:
- Chunk size: 1000 tokens
- Overlap: 100 tokens
- Max chunks retrieved: 5
```

**3. 프로그레스 표시**
```
"문서를 검색하고 있습니다..." (즉시 표시)
"관련 정보를 찾았습니다. 답변을 준비 중입니다..." (5초 후)
[최종 답변] (8초 후)
```

**응답 시간 모니터링:**
```kql
customEvents
| where name == "MessageReceived"
| extend ResponseTime = todouble(customDimensions["responseTime"])
| summarize 
    AvgTime = avg(ResponseTime),
    P50 = percentile(ResponseTime, 50),
    P95 = percentile(ResponseTime, 95),
    P99 = percentile(ResponseTime, 99)
| where P95 > 5000  // 5초 이상 경고
```

### 에스컬레이션

해결 불가능한 문제에 대한 명확한 에스컬레이션 경로를 제공합니다.

**에스컬레이션 트리거:**
- 3회 이상 의도 파악 실패
- 사용자가 명시적으로 담당자 요청
- 범위 외 질문 또는 복잡한 문제
- 민감한 정보 처리 필요
- 불만족 피드백 수신

**에스컬레이션 옵션:**

**1. 담당자 연결**
```
"전문 상담원과 연결해 드리겠습니다.
현재 대기 인원: 2명 (예상 대기 시간: 3분)

[상담원 연결] [콜백 예약] [이메일 문의]"
```

**2. 티켓 생성**
```
"해당 문의는 전문가 검토가 필요합니다.
티켓을 생성하여 담당팀에 전달하겠습니다.

티켓 번호: #2024-11-001
담당팀: IT 헬프데스크
예상 처리 시간: 24시간 이내

진행 상황은 이메일로 알려드립니다."
```

**3. 자기주도 해결**
```
"다음 리소스가 도움이 될 수 있습니다:

📄 상세 가이드 문서
🎥 튜토리얼 비디오
💬 커뮤니티 포럼

또는 담당자 연결을 원하시나요?"
```

**에스컬레이션 플로우 예시:**
```yaml
actions:
  - kind: Question
    id: confirmEscalation
    interactionType: Choice
    prompt: "담당자 연결을 원하시나요?"
    choices:
      - "네, 연결해 주세요"
      - "티켓 생성"
      - "나중에 연락 받기"
  
  - kind: Branch
    condition: Topic.confirmEscalation = "네, 연결해 주세요"
    actions:
      - kind: TransferToAgent
        context: "사용자 문의 요약 전달"
```

---

## 다음 단계

품질 관리 기준을 수립했다면, 다음은 보안 및 규정 준수를 검토하세요:

➡️ **다음**: [보안 및 규정 준수](03-security-compliance.md) - 데이터 보안 및 컴플라이언스

---

## 네비게이션

| [← 이전: 목표 정의](01-goal-definition.md) | [📚 목차로](../go-live-considerations.md) | [다음: 보안 및 규정 준수 →](03-security-compliance.md) |
|---|---|---|

---

**문서 정보**
- **버전**: 1.0.0
- **최종 업데이트**: 2024-11-27
- **다음 검토**: 2025-02-27
